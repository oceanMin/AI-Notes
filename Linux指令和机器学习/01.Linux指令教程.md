# Linux指令教程

## 一、系统管理与权限

### 1. `sudo` - 管理员权限操作
```bash
# 切换到管理员账号
sudo -i

# 更新软件包索引（获取可用更新列表）
sudo apt update

# 升级所有已安装的软件包
sudo apt upgrade

# 安装新软件包
sudo apt install 软件包名

# 删除软件包
sudo apt remove 软件包名

# 搜索软件包
sudo apt search 关键词
```

## 二、文件与目录操作

### 2. `ls` - 查看目录内容
```bash
# 查看当前目录下的文件和文件夹
ls

# 查看详细信息（权限、所有者、大小、时间）
ls -l

# 查看所有文件（包括隐藏文件）
ls -a

# 组合使用：查看所有文件的详细信息
ls -la

# 按文件大小排序显示
ls -lhS

# 按修改时间倒序显示
ls -lt
```

### 3. `cd` - 切换目录
```bash
# 切换到指定目录
cd /path/to/directory

# 返回上一级目录
cd ..

# 返回上两级目录
cd ../..

# 返回用户主目录（通常是/home/用户名）
cd ~
# 或简写
cd

# 返回上一个访问的目录
cd -

# 切换到根目录
cd /
```

### 4. `mkdir` - 创建目录
```bash
# 创建单个目录
mkdir 目录名

# 创建多级目录
mkdir -p 父目录/子目录/孙目录

# 创建目录并设置权限
mkdir -m 755 目录名
```

### 5. `rm` - 删除文件/目录
```bash
# 删除文件（会询问确认）
rm 文件名

# 强制删除文件（不询问）
rm -f 文件名

# 删除目录及其所有内容
rm -r 目录名

# 强制删除目录及其内容
rm -rf 目录名

# 删除多个文件
rm 文件1 文件2 文件3
```

## 三、文件编辑

### 6. `vi/vim` - 文本编辑器
```bash
# 打开文件编辑
vi 文件名
# 或
vim 文件名

# vi基本操作：
# 进入编辑模式：按 i
# 退出编辑模式：按 Esc
# 保存并退出：输入 :wq 然后按回车
# 不保存强制退出：输入 :q! 然后按回车
# 保存文件：输入 :w 然后按回车
# 跳转到行首：按 0
# 跳转到行尾：按 $
# 查找文本：输入 /关键词 然后按回车
# 下一处匹配：按 n
# 上一处匹配：按 N
```

## 四、Git版本控制

### 7. `git` - 代码版本管理
```bash
# 克隆远程仓库到本地
git clone https://github.com/用户名/项目名.git

# 拉取大文件（需安装git-lfs）
git lfs pull

# 检查大文件状态
git lfs ls-files

# 查看仓库状态
git status

# 添加文件到暂存区
git add 文件名
git add .  # 添加所有文件

# 提交更改
git commit -m "提交说明"

# 推送更改到远程仓库
git push origin 分支名

# 拉取远程更新
git pull origin 分支名

# 查看提交历史
git log
git log --oneline  # 简洁显示
```

## 五、Python环境管理

### 8. `conda` - 虚拟环境管理
```bash
# 创建新虚拟环境
conda create --name 环境名 python=版本号
# 示例：conda create --name myenv python=3.9

# 初始化conda（第一次使用）
conda init

# 激活虚拟环境
conda activate 环境名

# 退出当前环境
conda deactivate

# 查看所有虚拟环境
conda env list

# 删除虚拟环境
conda remove --name 环境名 --all

# 安装包到当前环境
conda install 包名

# 导出环境配置
conda env export > environment.yml

# 从配置文件创建环境
conda env create -f environment.yml
```

### 9. `pip` - Python包管理
```bash
# 安装包
pip install 包名

# 安装指定版本
pip install 包名==版本号

# 从requirements.txt安装所有依赖
pip install -r requirements.txt

# 升级包
pip install --upgrade 包名

# 卸载包
pip uninstall 包名

# 列出已安装的包
pip list

# 导出当前环境的依赖
pip freeze > requirements.txt
```

### 10. `python` - Python脚本执行
```bash
# 运行Python脚本
python 脚本名.py
# 或
python3 脚本名.py

# 进入Python交互模式
python
# 或
python3

# 运行Python代码片段
python -c "print('Hello World')"

# 安装包并运行
python -m pip install 包名

# 运行模块
python -m 模块名
```

## 六、Docker容器管理

### 11. `docker` - 容器化部署
```bash
# 查看运行中的容器
docker ps

# 查看所有容器（包括停止的）
docker ps -a

# 查看本地镜像
docker images

# 运行新的容器
docker run -d --name 容器名 -p 主机端口:容器端口 镜像名:标签
# 示例：docker run -d --name myapp -p 8080:80 nginx:latest

# 启动已停止的容器
docker start 容器名或ID

# 停止运行中的容器
docker stop 容器名或ID

# 重启容器
docker restart 容器名或ID

# 进入容器终端
docker exec -it 容器名或ID /bin/bash

# 查看容器日志
docker logs 容器名或ID
docker logs -f 容器名或ID  # 实时查看

# 删除容器
docker rm 容器名或ID
docker rm -f 容器名或ID  # 强制删除运行中的容器

# 删除镜像
docker rmi 镜像ID

# 查看docker版本
docker --version
```

### 12. `docker-compose` - 多容器编排
```bash
# 使用docker-compose启动服务
docker-compose up -d

# 停止并删除服务
docker-compose down

# 重启服务
docker-compose restart

# 查看运行状态
docker-compose ps

# 查看日志
docker-compose logs
docker-compose logs -f  # 实时查看

# 查看docker-compose版本
docker-compose --version
```

### 13. 批量操作
```bash
# 重启所有运行中的容器
docker restart $(docker ps -q)

# 停止所有运行中的容器
docker stop $(docker ps -q)

# 删除所有已停止的容器
docker container prune

# 删除所有未使用的镜像
docker image prune -a
```

## 七、网络与SSH连接

### 14. `ssh` - 远程连接
```bash
# SSH端口转发（隧道）
ssh -CNg -L 本地端口:远程地址:远程端口 用户名@跳板机地址 -p 跳板机端口

# 示例：
ssh -CNg -L 6006:127.0.0.1:9001 root@connect.westb.seetacloud.com -p 12933

# 参数说明：
# -C：启用压缩
# -N：不执行远程命令（仅建立隧道）
# -g：允许远程主机连接本地转发端口
# -L：本地端口转发

# 普通SSH连接
ssh 用户名@服务器地址
ssh -p 端口号 用户名@服务器地址  # 指定端口

# 使用密钥登录
ssh -i 私钥文件路径 用户名@服务器地址
```

## 八、其他实用命令

### 15. 文件操作
```bash
# 复制文件
cp 源文件 目标文件
cp -r 源目录 目标目录  # 复制目录

# 移动/重命名文件
mv 源文件 目标位置
mv 旧文件名 新文件名  # 重命名

# 查看文件内容
cat 文件名  # 显示整个文件
less 文件名  # 分页查看
head 文件名  # 查看前10行
tail 文件名  # 查看后10行
tail -f 文件名  # 实时查看日志

# 查找文件
find 目录 -name "文件名"
find . -name "*.py"  # 查找所有py文件

# 压缩解压
tar -czvf 压缩包名.tar.gz 要压缩的目录  # 压缩
tar -xzvf 压缩包名.tar.gz  # 解压
```

### 16. 系统信息
```bash
# 查看当前路径
pwd

# 查看磁盘使用情况
df -h

# 查看目录大小
du -sh 目录名

# 查看内存使用
free -h

# 查看CPU信息
lscpu

# 查看系统信息
uname -a
```

### 17. 进程管理
```bash
# 查看进程
ps aux

# 查找特定进程
ps aux | grep 进程名

# 终止进程
kill 进程ID
kill -9 进程ID  # 强制终止

# 实时查看系统状态
top
htop  # 需要安装，功能更强大
```

## 九、实用技巧

### 18. 命令组合
```bash
# 查找并删除特定文件
find . -name "*.log" -type f -delete

# 统计文件行数
wc -l 文件名

# 查看文件前5行
head -5 文件名

# 查看文件最后5行
tail -5 文件名

# 同时查看多个日志文件
tail -f 日志1.log 日志2.log

# 将命令输出保存到文件
命令 > 文件名  # 覆盖写入
命令 >> 文件名  # 追加写入
```

### 19. 权限管理
```bash
# 修改文件权限
chmod 755 文件名  # 所有者可读写执行，其他用户可读执行
chmod +x 文件名  # 添加执行权限

# 修改文件所有者
chown 用户名:组名 文件名

# 修改目录及其所有内容的权限
chmod -R 755 目录名
```

## 十、注意事项

1. **谨慎使用`rm -rf`**：一旦删除很难恢复
2. **备份重要数据**：操作前最好备份
3. **理解命令含义**：不理解的命令不要随意执行
4. **使用`--help`查看帮助**：`命令 --help`或`man 命令`
5. **善用Tab键补全**：提高输入效率
6. **记录常用命令**：方便以后查找使用

---

**记住**：Linux命令区分大小写，路径使用正斜杠`/`，参数前通常有`-`或`--`。多练习是掌握Linux命令的最佳方法！